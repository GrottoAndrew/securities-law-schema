# =============================================================================
# Securities Law Schema - Environment Configuration
# =============================================================================
# Copy this file to .env and configure for your environment
# NEVER commit .env to version control
# =============================================================================

# -----------------------------------------------------------------------------
# Application
# -----------------------------------------------------------------------------
NODE_ENV=development
PORT=3001
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# Authentication (REQUIRED - app will fail to start without these)
# -----------------------------------------------------------------------------
# Generate with: openssl rand -hex 32
JWT_SECRET=CHANGE_ME_GENERATE_WITH_OPENSSL_RAND_HEX_32
JWT_ISSUER=securities-law-schema
JWT_AUDIENCE=compliance-dashboard

# Token expiration (seconds)
JWT_ACCESS_EXPIRY=86400
JWT_AUDITOR_EXPIRY=259200

# -----------------------------------------------------------------------------
# Database (REQUIRED for production)
# -----------------------------------------------------------------------------
# Docker Compose credentials (used by docker-compose.yml)
POSTGRES_USER=compliance
POSTGRES_PASSWORD=CHANGE_ME_GENERATE_STRONG_PASSWORD
POSTGRES_DB=evidence_locker

DATABASE_URL=postgresql://compliance:CHANGE_ME@localhost:5432/evidence_locker
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_SSL=false

# For production, use connection string with SSL:
# DATABASE_URL=postgresql://user:password@host:5432/db?sslmode=require

# -----------------------------------------------------------------------------
# AWS Configuration (REQUIRED for production)
# -----------------------------------------------------------------------------
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=

# S3 Evidence Storage
S3_EVIDENCE_BUCKET=evidence-locker-artifacts
S3_ENABLE_OBJECT_LOCK=true

# KMS for encryption
KMS_KEY_ID=alias/evidence-locker

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# Comma-separated list of allowed origins
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_AUTH_MAX=5

# -----------------------------------------------------------------------------
# Compliance Settings
# -----------------------------------------------------------------------------
# Primary jurisdiction: sec, gdpr, or dual
PRIMARY_JURISDICTION=sec

# SEC Rule 17a-4 retention (years)
SEC_RETENTION_YEARS=7

# Enable WORM (Write Once Read Many) storage
ENABLE_WORM_STORAGE=true

# -----------------------------------------------------------------------------
# Testing
# -----------------------------------------------------------------------------
# hot = active offerings (frequent tests), cold = archived (infrequent)
TEST_CADENCE=hot

# Run red team analysis
ENABLE_REDTEAM=true

# -----------------------------------------------------------------------------
# Monitoring (Optional)
# -----------------------------------------------------------------------------
# Sentry DSN for error tracking
SENTRY_DSN=

# DataDog API key
DD_API_KEY=

# -----------------------------------------------------------------------------
# LLM Integration (Optional — see src/services/llm-integration.js)
# -----------------------------------------------------------------------------
# Each LLM provider requires its own account and API key.
# The system uses multiple providers for different compliance tasks:
#   - Claude: Test analysis, security scanning (primary)
#   - OpenAI: General compliance analysis (alternative)
#   - Mistral: High-volume document classification
#   - Llama: On-premise PII processing (air-gapped via Ollama)

# Anthropic Claude — https://console.anthropic.com/settings/keys
ANTHROPIC_API_KEY=
ANTHROPIC_MODEL=claude-opus-4-5-20251101

# OpenAI — https://platform.openai.com/api-keys
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o

# Mistral AI — https://console.mistral.ai/api-keys
MISTRAL_API_KEY=
MISTRAL_MODEL=mistral-large-latest

# Llama via Ollama (local, no API key needed) or Together AI (cloud)
# For Ollama: install from https://ollama.ai, run `ollama pull llama3.1:70b`
LLAMA_API_URL=http://localhost:11434/api
LLAMA_API_KEY=
LLAMA_MODEL=llama3.1:70b

# Provider selection per task (override defaults)
LLM_TEST_ANALYSIS_PROVIDER=claude
LLM_CLASSIFICATION_PROVIDER=mistral
LLM_SECURITY_PROVIDER=claude

# LLM webhook for external integrations (Slack, Teams, custom dashboards)
LLM_WEBHOOK_URL=

# -----------------------------------------------------------------------------
# External Integrations (Optional)
# -----------------------------------------------------------------------------
# Pershing API for trade reconciliation
PERSHING_API_URL=
PERSHING_API_KEY=

# EDGAR filing integration
EDGAR_API_URL=https://www.sec.gov/cgi-bin/browse-edgar
